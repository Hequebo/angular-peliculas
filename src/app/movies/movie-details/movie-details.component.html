@if (movie) {
    <div>
        <h2>{{ movie.title }} ({{ movie.releaseDate.getFullYear()}})</h2>

        <mat-chip-listbox>
        @for (genre of movie.genres; track $index) {
            <mat-chip [routerLink]="['/peliculas/filtrar']"[queryParams]="{genreId: genre.id}">{{ genre.name }}</mat-chip>
        }
        </mat-chip-listbox> | {{ movie.releaseDate.toDateString() }} | Promedio: {{ movie.averageVote.toFixed(1) }} Tu voto: 
            <app-rating [maxRating]="5" (voted)="rate($event)" [selectedRating]="movie.userVote"></app-rating>
        <div style="display: flex;">
            <span style="display: inline-block; margin-right: 1rem;">
                <img [src]="movie.poster" style="width: 225px; height: 315px;">
            </span>
            @if (movie.trailer) {
                <div>
                    <iframe 
                        width="565" 
                        height="315"
                        [src]="trailerURL" 
                        frameborder="0" 
                        allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                        allowfullscreen
                        >
                    </iframe>
                </div>
            }
        </div>

        @if (movie.actors) {
            <div style="margin-top: 1rem;">
            <h3>Actores</h3>
            <div style="display: flex; flex-direction: column;">
                @for (actor of movie.actors; track $index) {
                    <div style="margin-bottom: 2px;">
                        <img [src]="actor.photo" style="width: 50px; vertical-align: middle;" alt="actor-photo" />
                        <span style="display: inline-block; width: 200px; margin-left: 1rem;">
                            {{ actor.name }}
                        </span>
                        <span style="display: inline-block; width: 45px;">...</span>
                        <span>{{ actor.character }}</span>
                    </div>
                }
            </div>
        </div>
        }

        @if (coordinates.length > 0) {
            <div>
                <h2>Mostrandose en los siguientes cines</h2>
                <app-map [initalCoordinates]="coordinates" [readonly]="true"></app-map>
            </div>
        }
    </div>
} @else {
    <app-loading></app-loading>
}